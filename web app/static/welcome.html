<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>WELCOME</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css" media="screen and (max-width: 1050px)">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
     <!-- Compiled and minified CSS -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
</head>
<body>

    <nav>
        <div class="nav-wrapper">
            <a href="#!" class="brand-logo"><img src="images/logo2.png" alt=""></a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger right"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                <li><a href="#prevention">PREVENTION</a></li>  
                <li><a href="#treatment">TREATMENT</a></li>
                <li><a href="#welcomeContact">CONTACT</a></li>
                <li><a href="#" class="waves-effect waves-light btn">SIGNOUT</a></li>
            </ul>
        </div>
    </nav>

    <ul class="sidenav center" id="mobile-demo">
        <li><a href="#prevention">PREVENTION</a></li>  
        <li><a href="#treatment">TREATMENT</a></li>
        <li><a href="#welcomeContact">CONTACT</a></li>
        <li><a href="#" class="waves-effect waves-light btn">SIGNOUT</a></li>
    </ul>

    <div class="predict">
        <div class="container">
            <div class="row">
                <div class="col s12">
                    <h2>Upload Fundus image of your eye here !!</h2>
                    <input id="image-selector" type="file"/>
                    <button id="predict-button">Predict</button>
                    <p>Probability of Diabetic Retinopathy : <span id="dr-prediction"></span></p>
                    <p>Probability of No Diabetic Retinopathy : <span id="nodr-prediction"></span></p>
                    <img id="selected-image" src=""/>
                </div>
            </div>
        </div>
    </div>

    <div class="prevention">
    <div class="container row scrollspy" id="prevention">
        <h3 class="center">Preventions</h3>
        <ul class="collapsible">
            <li>
                <div class="collapsible-header"><i class="fas fa-hand-holding-heart"></i>Healthy lifestyle</div>
                <div class="collapsible-body">
                    <p>Adopting a few lifestyle changes can improve your general health and reduce your risk of developing retinopathy. These include:</p>
                    <ol>
                        <li>eating a healthy, balanced diet – in particular, try to cut down on salt, fat and sugar</li>
                        <li>losing weight if you're overweight – you should aim for a BMI of 18.5-24.9; use the BMI calculator to work out your BMI</li>
                        <li>exercising regularly – aim to do at least 150 minutes of moderate-intensity activity, such as walking or cycling, a week; doing 10,000 steps a day can be a good way to reach this target</li>
                        <li>stopping smoking if you smoke</li>
                        <li>not exceeding the recommended alcohol limits – men and women are advised not to regularly drink more than 14 alcohol units a week</li>
                    </ol>
                    <p>You may also be prescribed medication to help control your blood sugar level (such as insulin or metformin), blood pressure (such as ACE inhibitors) and/or cholesterol level (such as statins).</p>
                </div>
            </li>
            <li>
                <div class="collapsible-header"><i class="fas fa-notes-medical"></i>Know your blood sugar</div>
                <div class="collapsible-body">
                    <p>If you check your blood sugar level at home, it should be 4 to 10mmol/l. The level can vary throughout the day, so try to check it at different times.</p>
                    <p>The check done at your GP surgery is a measure of your average blood sugar level over the past few weeks. You should know this number, as it is the most important measure of your diabetes control. </p>
                    <p>It's called HbA1c, and for most people with diabetes it should be around 48mmol/l or 6.5%.</p>
                </div>
            </li>
            <li>
                <div class="collapsible-header"><i class="fas fa-heartbeat"></i>Know your blood pressure</div>
                <div class="collapsible-body">
                    <p>You can ask for a blood pressure test at your GP surgery, or you can buy a blood pressure monitor to use at home. Blood pressure is measured in millimetres of mercury (mmHg) and is given as 2 figures.</p>
                    <p>If you have diabetes, you'll normally be advised to aim for a blood pressure reading of no more than 140/80mmHg, or less than 130/80mmHg if you have diabetes complications, such as eye damage.</p>
                </div>
            </li>
            <li>
                <div class="collapsible-header"><i class="fas fa-user-md"></i>Regular screening</div>
                <div class="collapsible-body">
                   <p>Even if you think your diabetes is well controlled, it's still important to attend your annual diabetic eye screening appointment, as this can detect signs of a problem before you notice anything is wrong.</p>
                   <p>Early detection of retinopathy increases the chances of treatment being effective and stopping it getting worse.</p>
                   <p>You should also contact your GP or diabetes care team immediately if you develop any problems with your eyes or vision, such as:</p>
                   <ol>
                       <li>gradually worsening vision</li>
                       <li>sudden vision loss</li>
                       <li>shapes floating in your field of vision (floaters)</li>
                       <li>blurred vision</li>
                       <li>eye pain or redness</li>
                   </ol>
                   <p>These symptoms don't necessarily mean you have diabetic retinopathy, but it's important to get them checked out straight away.</p>
                </div>
            </li>
        </ul>
    </div>
    </div>

    <div class="treatment">
        <div class="container">
            <div class="row row scrollspy" id="treatment">
                <h3 class="center">How is diabetic retinopathy treated?</h3>
                <div class="col s17 l4">
                    <div class="card">
                        <div class="card-image waves-effect waves-block waves-light">
                            <img class="activator" src="images/t1.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title activator grey-text text-darken-4">Management<i class="material-icons right">more_vert</i></span>
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">Management<i class="material-icons right">close</i></span>
                            <p>Keeping blood sugar levels, blood pressure and cholesterol levels under control can prevent diabetes-related vision problems.</p>
                        </div>
                    </div>
                </div>
                <div class="col s17 l4">
                    <div class="card">
                        <div class="card-image waves-effect waves-block waves-light">
                            <img class="activator" src="images/t2.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title activator grey-text text-darken-4">Injections and laser<i class="material-icons right">more_vert</i></span>
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">Injections and laser<i class="material-icons right">close</i></span>
                            <p>If detected early, injections and laser treatment can stop the disease from progressing and prevent blindness.</p>
                        </div>
                    </div>
                </div>
                <div class="col s17 l4">
                    <div class="card">
                        <div class="card-image waves-effect waves-block waves-light">
                            <img class="activator" src="images/t3.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title activator grey-text text-darken-4">Surgery<i class="material-icons right">more_vert</i></span>
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">Surgery<i class="material-icons right">close</i></span>
                            <p>In the case of advanced diabetic retinopathy, surgery may be needed to remove blood and new blood vessels from the back of the eye.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="logo">
        <div class="parallax-container">
            <div class="parallax"><img src="images/eyecare.png"></div>
        </div>
    </div>

    <div class="contact">
        <div class="container">
            <div class="row scrollspy" id="welcomeContact">
                <div class="col s12 l4 ">
                    <h3>Address</h3>
                    <p><i class="material-icons">location_on</i>: Kathmandu, Nepal</p>
                    <p><i class="material-icons">email</i>: eyecare@gmail.com</p>
                    <p><i class="material-icons">call</i>: +977 1234567890</p>
                </div>
                <div class="col s12 l8">
                    <form class="col s12">
                        <h3>Quick Messages / Feedback</h3>
                        <div class="row">
                            <div class="input-field col s6">
                                <i class="material-icons prefix">account_circle</i>
                                <input id="icon_prefix" type="text" class="validate">
                                <label for="icon_prefix">First Name</label>
                            </div>
                            <div class="input-field col s6">
                                <i class="material-icons prefix">phone</i>
                                <input id="icon_telephone" type="tel" class="validate">
                                <label for="icon_telephone">Telephone</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <i class="material-icons prefix">email</i>
                                <input id="email" type="email" class="validate">
                                <label for="email">Email</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                            <i class="material-icons prefix">mode_edit</i>
                            <textarea id="icon_prefix2" class="materialize-textarea"></textarea>
                            <label for="icon_prefix2">Message</label>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col s12 l6">
                    <h4>Quick Links</h4>
                    <div class="col s6">
                        <ul>
                            <li><a href="#">About EyeCare</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Careers</a></li>
                        </ul>
                    </div>
                    <div class="col s6">
                        <ul>
                            <li><a href="#">developer Team</a></li>
                            <li><a href="#">Management Team</a></li>
                            <li><a href="#">Work With us</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col s12 l6">
                    <div class="socialMedia">
                        <a href="#"><i class="fab fa-facebook-square"></i></a>
                        <a href="#"><i class="fab fa-twitter-square"></i></a>
                        <a href="#"><i class="fab fa-google-plus-square"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container center">
                © 2014 Copyright Text
            </div>
        </div>
    </div>


<script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    let base64Image;
    $("#image-selector").change(function() {
        let reader = new FileReader();
        reader.onload = function(e) {
            let dataURL = reader.result;
            $('#selected-image').attr("src", dataURL);
            base64Image = dataURL.replace("data:image/jpeg;base64,","");
            console.log(base64Image);
        }
        reader.readAsDataURL($("#image-selector")[0].files[0]);
        $("#dr-prediction").text("");
        $("#nodr-prediction").text("");
    });
    
    $("#predict-button").click(function(event){
        let message = {
            image: base64Image
        }
        console.log(message);
        $.post("http://localhost:5000/predict", JSON.stringify(message),function(response){
            $("#dr-prediction").text(response.prediction.dr.toFixed(6));
            $("#nodr-prediction").text(response.prediction.nodr.toFixed(6));
            console.log(response);
        });
    });

    $(document).ready(function(){
        $('.parallax').parallax();
        $('.collapsible').collapsible();
    });
</script>
</body>
</html>